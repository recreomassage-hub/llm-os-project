#!/bin/bash
# start_workflow.sh - –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏

echo "üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
REQUIRED_FILES=("PROJECT_CONFIG.md" "WORKFLOW_STATE.md" ".cursorrules")
for file in "${REQUIRED_FILES[@]}"; do
    if [ ! -f "$file" ]; then
        echo "‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ñ–∞–π–ª: $file"
        echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞: ./setup_workflow.sh"
        exit 1
    fi
done

echo "‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ"
echo ""
echo "üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:"
grep -A2 "current_stage:" WORKFLOW_STATE.md 2>/dev/null || echo "–ù–µ –Ω–∞–π–¥–µ–Ω"
grep -A2 "current_role:" WORKFLOW_STATE.md 2>/dev/null || echo "–ù–µ –Ω–∞–π–¥–µ–Ω"
echo ""
echo "üöÄ –ó–∞–ø—É—Å–∫–∞—é Cursor —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π..."

# –°–æ–∑–¥–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
if [ ! -d ".git" ]; then
    echo "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π..."
    git init
    git add .
    git commit -m "üöÄ Initial commit: –ò–ò-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–∞"
fi

echo ""
echo "üéÆ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ù–ê–ß–ê–õ–ê:"
echo ""
echo "1. –û—Ç–∫—Ä–æ–π Cursor –≤ —ç—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"
echo "2. –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–º–ø—Ç:"
echo "----------------------------------------"
echo "–Ø –Ω–∞—á–∏–Ω–∞—é –ø—Ä–æ–µ–∫—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏."
echo ""
echo "–¢—ã ‚Äî ANALYST (–∏–∑ WORKFLOW_STATE.md)."
echo "–ü—Ä–æ—á–∏—Ç–∞–π PROJECT_CONFIG.md –∏ WORKFLOW_STATE.md."
echo "–û–ø—Ä–µ–¥–µ–ª–∏ –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ requirements."
echo "–ü—Ä–µ–¥–ª–æ–∂–∏ –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π."
echo "----------------------------------------"
echo ""
echo "3. –°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ WORKFLOW_STATE.md"
echo "4. –û–±–Ω–æ–≤–ª—è–π —á–µ–∫–ª–∏—Å—Ç—ã –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"

